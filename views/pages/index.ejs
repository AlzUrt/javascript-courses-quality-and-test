<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('../partials/head'); %>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>

<body class="container">

<main>

    <h1>❓</span> Le jeu du pendu ❓</h1>
    <p>Essayer de deviner le mot !</p>

    <h2>Score: <span id="score"><%= score %></span></h2>

    <% if (!isGameOver) { %>
        <form action="/" method="post">
            <fieldset class="uk-fieldset">

                <legend class="uk-legend">Nombre d'essai restant : <%= numberOfTries %></legend>

                <div class="uk-margin">
                    <input class="uk-input" type="text" name="word" placeholder="Tapez une lettre">
                </div>

                <div class="uk-margin">
                    <button class="uk-input uk-button-danger uk-form-width-medium" type="submit" name="reset" value="true">Reset</button>
                    <button class="uk-input uk-button-secondary uk-form-width-medium" type="submit" value="form-success">Tester</button>
                </div>

            </fieldset>
        </form>
    <% } else { %>
        <p>Le jeu est terminé. Appuyez sur Reset pour recommencer.</p>
        <form action="/" method="post">
            <button class="uk-input uk-button-danger uk-form-width-medium" type="submit" name="reset" value="true">Reset</button>
        </form>
    <% } %>

    <% if (game) { %>
       <h3>Votre mot : <%= game %></h3>
    <% } %>

    <% if (isGameOver) { %>
        <h3>Le mot était : <%= word %></h3>
    <% } %>

</main>

<script>
    function updateScore() {
        $.get('/score', function(data) {
            $('#score').text(data.score);
        });
    }

    // Update score every second
    setInterval(updateScore, 1000);
</script>

</body>
</html>